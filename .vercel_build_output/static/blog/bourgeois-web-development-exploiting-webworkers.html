<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="" />
    <link rel="icon" href="../favicon.png" />
    <link
      href="../syntaxHighlighting.css"
      rel="stylesheet"
      type="text/css"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <meta http-equiv="content-security-policy" content=""><title>Blog | Konstantin Kovar</title>
	<link rel="stylesheet" href="/_app/assets/app-e93b226b.css">
	<link rel="modulepreload" href="/_app/start-f82bed3f.js">
	<link rel="modulepreload" href="/_app/chunks/index-a4305d86.js">
	<link rel="modulepreload" href="/_app/pages/__layout.svelte-54194aaf.js">
	<link rel="modulepreload" href="/_app/chunks/index-e10c4c74.js">
	<link rel="modulepreload" href="/_app/pages/blog/bourgeois-web-development-exploiting-webworkers.md-02ab41a9.js">
	<link rel="modulepreload" href="/_app/chunks/BlogPostLayout-2987b3f1.js">
	<link rel="modulepreload" href="/_app/chunks/Article-1fb784f3.js">
	<link rel="modulepreload" href="/_app/chunks/PageHeading-8fc8889e.js">
    <style>
      @font-face {
        font-family: 'Lora';
        font-style: normal;
        font-display: swap;
        font-weight: 400;
        src: local('Lora'), local('Lora Regular'),
          local('Lora-VariableFont_wght'),
          url('../static/fonts/Lora.ttf') format('ttf');
      }

      @font-face {
        font-family: 'Lora';
        font-style: italic;
        font-display: swap;
        font-weight: 400;
        src: local('Lora'), local('Lora Italic'),
          local('Lora-Italic-VariableFont_wght'),
          url('../static/fonts/Lora-Italic.ttf')
            format('ttf');
      }
    </style>
  </head>
  <body>
    <div>






<div class="min-h-[170vh]"><div class="left-0 right-0" style="position: fixed; transform: translate(0px);"><div class="relative mx-auto w-11/12 lg:w-2/3 xl:w-1/2 2xl:w-1/3">

<nav class="mx-auto mb-8 border-b-4 border-stone-700 py-4"><ul class="flex justify-around"><li><a href="/"><div class="w-36 rounded py-2 text-center transition-colors hover:bg-stone-600 hover:text-stone-200">home</div></a></li><li><a href="/blog"><div class="w-36 rounded py-2 text-center transition-colors hover:bg-stone-600 hover:text-stone-200">blog</div></a></li></ul></nav>
      



<div class="relative h-52 overflow-hidden"><div class="relative my-4 h-52 w-full text-center"><h1 class="mb-8 text-6xl">Bourgeois web development</h1>
    <subtitle class="font-serif text-xl italic">or: how to exploit web workers for cheap labor</subtitle></div>
  </div>
<div class="relative h-56 bg-contain bg-center bg-no-repeat text-red-500" style="background-image: url(&#39;data:image/svg+xml;utf8,TODO&#39;);"></div>


<article class="prose prose-stone mx-auto mt-4 translate-y-96 prose-code:font-mono prose-code:text-lg prose-code:font-normal before:prose-code:hidden after:prose-code:hidden xl:prose-xl 2xl:prose-2xl" style="transform: translateY(NaNpx);"><p>There is a long-standing conviction in web development, that is steadily losing its ground: <em>Single-threadedness.</em> While JavaScript is a single-threaded language, the browser has evolved to be a platform that can easily and efficiently handle parallel processes. The secret sauce behind this is so-called web workers. This blog post is dedicated to my personal research on this topic.</p>
<h2>What’s the critical rendering path (CRP)?</h2>
<p>The <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path">MDN web docs</a> state:</p>
<blockquote><p>The Critical Rendering Path is the sequence of steps the browser goes through to convert the HTML, CSS, and JavaScript into pixels on the screen.</p></blockquote>
<p>This is the abovementioned <em>single-threadedness</em> in action. This is a concern, because as web applications grow in complexity, so do the computations they rely on. Clogging the CRP with these tasks, therefore, means delaying the rendering of the user interface to the screen by however much time these computations need.</p>
<p>For most classic websites, this is completely fine, but as web technologies populate more and more different environments with higher and higher performance/optimization needs (i.e. progressive web apps, IoT), this is unacceptable.</p>
<h2>Straightforward API</h2>
<p>There is of course a lot of technical debt one could go into, but it is not necessary to leverage the benefits of web workers in your code. In fact, it’s probably a lot simpler to delegate work to workers than you might think.</p>
<pre class="language-undefined"><!-- HTML_TAG_START --><code class="language-undefined">             +---------+
             |         |
             |   CRP   |
             |         |
             +--+------+
                |   ^
  postMessage() |   | postMessage()
                v   |
             +------+--+
             |         |
             | Worker  |
             |         |
             +---------+</code><!-- HTML_TAG_END --></pre>
<p>This diagram pretty much encapsulates everything you need to know about how to interact with a web worker. After instantiating a <code>new Worker(&#39;filename.js&#39;)</code> you can use the resulting object to <code>postMessage()</code> to it, passing data as arguments. Inside the <code>filename.js</code> file we listen to the <code>onmessage</code> event, we proceed to do whatever we want with data passed in and can return data back to the main thread again by using <code>postMessage()</code> and in return listening to the <code>onmessage</code> event on the worker object itself.</p>
<p>Alright, this was a lot of information crammed into a single paragraph, but this has a reason: You’re probably not going to handle these things manually anyways (although it’s a fun exercise to try). Rather, you will rely on libraries, that are utilizing web workers under the hood.</p></article></div>
    <footer class="mt-8 h-4 border-t-2 border-stone-600 pt-4 text-center font-serif text-xs text-stone-600"><p>I am keeping all the cookies to myself and you can&#39;t
    have <span class="underline">any</span>.
  </p>
  <p>This website uses <a target="_blank" href="https://www.goatcounter.com/">a very privacy aware analytics tool</a>.
  </p>
  <p class="mb-4">Do something nice today.</p></footer></div></div>


		<script type="module" data-hydrate="16rfnl1">
		import { start } from "/_app/start-f82bed3f.js";
		start({
			target: document.querySelector('[data-hydrate="16rfnl1"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("/_app/pages/__layout.svelte-54194aaf.js"),
						import("/_app/pages/blog/bourgeois-web-development-exploiting-webworkers.md-02ab41a9.js")
				],
				params: {},
				routeId: "blog/bourgeois-web-development-exploiting-webworkers"
			}
		});
	</script></div>
    <script
      defer
      data-goatcounter="https://neugierdsnase.goatcounter.com/count"
      async
      src="//gc.zgo.at/count.js"
    ></script>
  </body>
</html>
